<nav class="navbar navbar-inverse">
    <a class="navbar-brand" href="#"><img src="apple-touch-icon.png" alt="">Stem</a>
    <span class="pull-right">
        <a class="btn glyphicon glyphicon-off" onclick="localStorage.clear();"></a>
        <a class="btn glyphicon glyphicon-th-large" onclick="localStorage.userListType = 'grid'; document.querySelector('users[type]').setAttribute('type','grid')"></a>
        <a class="btn glyphicon glyphicon-th-list" onclick="localStorage.userListType = 'list'; document.querySelector('users[type]').setAttribute('type','list')"></a>
    </span>
</nav>

<alert ng-repeat = "alert in alerts" type = "{{alert.type}}"> {{alert.msg}} </alert>
<input
    ng-show             = "users"
    ng-model            = "userQuery"
    ui-keydown          = "{ 'enter tab up down': 'userSelect($event)' }"
    placeholder         = "Select User"
    class               = "form-control"
    type                = "text"
    tabindex            = "1"/>
<users
    list
    class               = "col-xs-12 col-sm-6"
    ui-keydown          = "{ 'enter tab up down': 'userSelect($event)' }">
    <user
        ng-repeat       = "user in users | orderBy:'Name' track by user.UserID"
        ng-click        = "userSelect($event, user)"
        ng-selected     = "$first"
        ng-show         = "!user.stem && userQuery && [user.Name, user.Title || '', user.BusinessUnitName || ''].join().toLowerCase().indexOf(userQuery) > -1"
        tabindex        = "-1"
        role            = "{{user.Title}}"
        team            = "{{user.BusinessUnitName}}">
        {{user.Name}}
    </user>
</users>
<users
    type                = "{{userListType}}">
    <user
        ng-repeat       = "user in users | filter: { stem: true } track by user.UserID"
        status          = "{{user.KeyscanStatus}}"
        ui-keydown      = "{ 'backspace delete left up right down': 'userMove($event)' }"
        onclick         = "this.focus()"
        tabindex        = "1">
            <img
                loadImage
                ng-src  = "{{user.PhotoPath}}"/>
            <info>
                <team>{{user.BusinessUnitName}}</team>
                <name>{{user.Name}}</name>
                <role>{{user.Title}}</role>
            </info>
            <scan>
                <status>{{user.KeyscanStatus}}</status>
                <time>{{user.KeyscanMoment}}</time>
            </scan>
            <connect>
                <a
                    ng-show  = "user.MobileNumber"
                    href     = "gtalk:chat?jid={{user.Email}}&amp;from_jid={{my.Email}}"
                    class    = "glyphicon glyphicon-send"></a>
                <a
                    ng-show  = "user.MobileNumber"
                    href     = "sms:{{user.MobileNumber}}"
                    class    = "glyphicon glyphicon-comment"></a>
                <a
                    ng-show  = "user.Email"
                    href     = "mailto:{{user.Email}}"
                    class    = "glyphicon glyphicon-envelope"></a>
                <a
                    ng-show  = "user.MobileNumber"
                    href     = "tel:{{user.MobileNumber}}"
                    class    = "glyphicon glyphicon-earphone"></a>
            </connect>
            <x ng-click  = "user.remove()">&times;</x>
    </user>
</users>
<tickets
    ng-show = "tickets">
    <h5>Tickets ({{(tickets | filter: {GroupName:'OpenForMe'}).length}})</h5>
    <ticket
        ng-repeat = "ticket in tickets | filter: { GroupName: 'OpenForMe' } | orderBy:'GroupName':true track by ticket.TicketID"
        onclick   = "this.focus()"
        tabindex  = "1">
        <info>
            <id>{{ticket.TicketID}} Â» {{ticket.AssignedToUser}}</id>
            <title>{{ticket.Title}}</title>
        </info>
        <history></history>
    </ticket>
<!-- <progressbar class = "progress-striped active" value = "userUpdateInterval"></progressbar> -->
</tickets>